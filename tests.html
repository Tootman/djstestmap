<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="richmondriverside.js"></script>
</head>

<body>
    <button onclick="myFunc()">Set element literally</button>
    <button onclick="iterateOverOjectProps()">iterateOverOjectProps</button>
    <input type="text" id="featureIndex" value="3" />
    <button onclick="generateElements()">generate Elements</button>
    <button onclick="readAttributes()">Read Attributes</button>
    <div id="fields-section">
    </div>
</body>

</html>
<template>
</template>
<script>
"use strict";
var a = {
    "myOb": {
        "users": [{
                "id": "user1",
                "species": "Human",
                "gender": "male",
                "age": 27
            },
            {
                "id": "user2",
                "name": "Jimmy",
                "species": "Human",
                "gender": "male",
                "age": 29
            }
        ]
    }
}

let sampleGeoData = {
    "type": "FeatureCollection",
    "features": [{
            "type": "Feature",
            "geometry": {
                "type": "LineString",
                "coordinates": []
            },
            "properties": {}
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [-0.3142518470359619,
                        51.4382554791582
                    ],
                    [-0.31422502494581295,
                        51.43815181655922
                    ],
                    [-0.3141807684970672,
                        51.43815265254889
                    ],
                    [-0.31404531694181514,
                        51.43799653038403
                    ],
                    [-0.3140439758373077,
                        51.43796810663045
                    ],
                    [-0.3140734801364715,
                        51.43792881494198
                    ],
                    [-0.3141137132716949,
                        51.437910423076175
                    ],
                    [-0.3142008850646789,
                        51.4378895232197
                    ]
                ]
            },
            "properties": {}
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [-0.31431756115682674,
                    51.4378544114393
                ]
            },
            "properties": {
                "Asset": "Litterbin",
                "Condition": 3,
                "Completed": true
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [-0.31402885327827335,
                            51.43843878551679
                        ],
                        [-0.3142568410445392,
                            51.43833763129267
                        ],
                        [-0.31427829871665836,
                            51.43834682714048
                        ],
                        [-0.314036899905318,
                            51.43844630937575
                        ],
                        [-0.31402885327827335,
                            51.43843878551679
                        ]
                    ]
                ]
            },
            "properties": {
                "Asset": "Hedge",
                "height": 0.7,
                "description": "privet",
                "instructions": "cut north face and top",
                "Completed": true
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [-0.3149148972961484,
                            51.43863519442563
                        ],
                        [-0.31482906660767185,
                            51.43857500376819
                        ],
                        [-0.31497390589447605,
                            51.43847468582944
                        ],
                        [-0.3151643427345334,
                            51.438389415408295
                        ],
                        [-0.31522871575089084,
                            51.43842954268515
                        ],
                        [-0.31522335133286106,
                            51.43847134189435
                        ],
                        [-0.3150195034477292,
                            51.43859841125545
                        ],
                        [-0.3149148972961484,
                            51.43863519442563
                        ]
                    ]
                ]
            },
            "properties": {
                "Asset": "rough grass",
                "description": "wild flowers and bulbs",
                "condition": "n/a",
                "instructions": "none",
                "Completed": false

            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [-0.31466679296227085,
                    51.43826652540366
                ]
            },
            "properties": {
                "Asset": "gully grating",
                "description": "small, metal",
                "condition": 4,
                "instructions": "inspect and check it's clear of debris",
                "photo": "https://geo.danieljsimmons.uk/dan1/PHOTO_20180116_105838.jpg"

            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [-0.31537137574287044,
                        51.43908077002021
                    ],
                    [-0.31511388367744075,
                        51.43878985061235
                    ],
                    [-0.31427703446479427,
                        51.43827822922788
                    ]
                ]
            },
            "properties": {
                "Asset": "path",
                "description": "tarmac",
                "condition": 4,
                "width": 0.5
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [-0.31352601594062435,
                    51.438612622938365
                ]
            },
            "properties": {
                "Asset": "sign",
                "description": "welcome, metal",
                "condition": 1,
                "instructions": "replace sign"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [-0.3146793899642262,
                    51.43889228886129
                ]
            },
            "properties": {
                "Asset": "Bench",
                "Description": "wooden",
                "condition": 2,
                "instructions": "varnsih",
                "photo": "https://geo.danieljsimmons.uk/dan1/PHOTO_20180220_122300.jpg"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [-0.31473320234829316,
                    51.4392233630455
                ]
            },
            "properties": {
                "Asset": "Bench",
                "Description": "wooden",
                "condition": 4,
                "photo": "https://geo.danieljsimmons.uk/dan1/PHOTO_20180116_115941.jpg"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [-0.31434623673874285,
                    51.43878255548275
                ]
            },
            "properties": {
                "Asset": "na/",
                "description": "0.1m hole in tarmac",
                "condition": 1,
                "instructions": "inspect and fill if necessary"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [-0.3152438108318165,
                        51.43912553618324
                    ],
                    [-0.3147154156558827,
                        51.43931530139406
                    ]
                ]
            },
            "properties": {
                "Asset": "wall",
                "description": "brick",
                "height": 1.5,
                "condition": 4
            }
        }
    ]
}


function iterateOverOjectProps() {
    // list Assets 
    const ob = sampleGeoData.features
    Object.keys(ob).forEach(function(key) {
        console.log(ob[key].properties.Asset)
    })
}


function generateElements() {

    const featureID = document.getElementById("featureIndex").value
    // console.log(sampleGeoData.features[featureID].properties.Asset)
    const fs = document.getElementById("fields-section")
    fs.innerHTML = null
    const props = sampleGeoData.features[featureID].properties
    const myFunc = Object.keys(props).forEach(
        function(key) {
            //console.log("generateElements: " + typeof(key)+ " " + key + ": " + props[key])
            // fs.innerHTML += "<br>"
            const propType = typeof(props[key])
            if (propType === "string" || propType === "number") {
                createFormItem(fs, "Input", "text", key, props[key])
            } else if (propType === "boolean") {
                createFormItem(fs, "Input", "Checkbox", key, props[key])
            } else {
                console.log("NOT OK: " + typeof(key))
            }
            //fs.insertAdjacentHTML('beforeEnd', '<br>');
        }
    )
}

function readAttributes() {
    const featureID = document.getElementById("featureIndex").value
    const props = sampleGeoData.features[featureID].properties

    const myFunc = Object.keys(props).forEach(
        function(key) {
            const propType = typeof(props[key])
            const el = document.getElementById(String("input_" + key))
            if (propType === "string" || propType === "number") {
                props[key] = el.value
            } else if (propType === "boolean") {
                props[key] = el.checked
            }

        }
    )
}




function createFormItem(parentTag, el, type, prop, value) {
    const wrapperDiv = createWrapperDiv(parentTag)
    createLabel(wrapperDiv, el, type, prop, value)
    createInputBox(wrapperDiv, el, type, prop, value)

    function createWrapperDiv() {
        let x = document.createElement("div")
        x.classList.add("form-group")
        parentTag.appendChild(x)
        return x
    }

    function createInputBox(parent) {
        let x = document.createElement(el)
        x.setAttribute("type", type)
        x.type = type
        x.classList.add("mystyle") 
        x.value = value
        x.id = String("input_" + prop)
        if (type === "Checkbox") {
            console.log("checkboxValue: " + value)
            x.checked = value;
        }
        parent.appendChild(x);
    }

    function createLabel(parent) {
        let x = document.createElement("label")
        x.innerHTML = prop
        parent.appendChild(x);

    }




    // const str =  String("<" + el +  " type='" + type + "'" + "value= '" + value + "'/>")
    // el.innerHTML+= str
}
</script>